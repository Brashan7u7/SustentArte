<div class="container-fluid mt-2 mb-5">
  <div>
    @if (isNew) {
      <a class="btn btn-primary btn-custom" routerLinkActive="active" routerLink="../panelVendedor/">Regresar</a>
    } @else {
      <a class="btn btn-primary btn-custom" routerLinkActive="active" routerLink="../../panelVendedor/">Regresar</a>
    }
  </div>
  <div class="row titulo">
    <h5>{{ isNew ? 'Agregar producto' : 'Editar producto' }}</h5>
    <hr class="linea">
  </div>
  <div class="row"></div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-6">
        <form [formGroup]="productoForm" (ngSubmit)="agregarProducto()" class="needs-validation" novalidate>
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre:</label>
            <input type="text" class="form-control" formControlName="nombreP" id="nombre" placeholder="Ingresa el nombre del producto" required />
            <div class="invalid-feedback">Por favor, ingrese el nombre del producto.</div>
          </div>
          <div class="mb-3">
            <label for="descripcion" class="form-label">Descripcion:</label>
            <textarea class="form-control" formControlName="descripcion" id="descripcion" rows="3" placeholder="Ingresa la descripcion del producto" required></textarea>
            <div class="invalid-feedback">Por favor, ingrese la descripcion del producto.</div>
          </div>
          <div class="mb-3">
            <label for="precio_Venta" class="form-label">Precio de venta:</label>
            <input type="number" class="form-control" formControlName="precio_Venta" id="precio_Venta" placeholder="Ingresa el precio de venta" required />
            <div class="invalid-feedback">Por favor, ingrese el precio de venta.</div>
          </div>
          <div class="mb-3">
            <label for="stock" class="form-label">Cantidad:</label>
            <input type="number" class="form-control" formControlName="stock" id="stock" placeholder="Ingresa la cantidad de productos" required />
            <div class="invalid-feedback">Por favor, ingrese la cantidad de productos.</div>
          </div>
          <div class="mb-3">
            <label for="historia" class="form-label">Historia del producto:</label>
            <textarea class="form-control" formControlName="historia" id="historia" rows="3" placeholder="Ingresa la historia del producto" required></textarea>
            <div class="invalid-feedback">Por favor, ingrese la historia del producto.</div>
          </div>
          <div class="mb-3">
            <label for="categoria" class="form-label">Material</label>
            <div class="align-items-left justify-content-left">
              <div class="dropdown elemento combo">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                  Seleccionar material
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  @for (item of materiales; track item.id_material) {
                  <li><a class="dropdown-item" (click)="selecMaterial(item.id_material)">{{item.nombre_material}}</a></li>
                  }
                </ul>
              </div>
            </div>
            <div class="invalid-feedback">Por favor, elija un material.</div>
          </div>
          <div class="mb-3">
            <label for="categoria" class="form-label">Categorías</label>
            <div class="align-items-left justify-content-left">
              <div class="dropdown elemento combo">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                  Seleccionar categoría
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  @for (item of categorias; track item.id_categoria) {
                  <li><a class="dropdown-item" (click)="selecCategoria(item.id_categoria)">{{item.nombre_categoria}}</a></li>
                  }
                </ul>
              </div>
            </div>
            <div class="invalid-feedback">Por favor, elija una categoría.</div>
          </div>
          <div class="mb-3">
            <label for="urlImagen" class="form-label">URL de la imagen:</label>
            <input type="url" class="form-control" formControlName="imagen" id="urlImagen" placeholder="Ingresa la URL de la imagen del producto" required />
            <div class="invalid-feedback">Por favor, ingrese la URL de la imagen.</div>
          </div>
          <div class="mb-3 row">
            <div class="">
              <button type="submit" class="btn btn-primary btn-custom2">{{ isNew ? 'Agregar Producto' : 'Editar Producto' }}</button>
            </div>
          </div>
        </form>
      </div>
      <div class="col-6">
        <div class="image-upload-container">
          <div *ngIf="productoForm.get('imagen')?.value" class="image-preview">
            <img [src]="productoForm.get('imagen')?.value" alt="Selected Image Preview">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
